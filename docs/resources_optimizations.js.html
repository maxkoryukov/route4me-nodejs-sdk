<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>resources/optimizations.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Route4MeError.html">Route4MeError</a></li><li><a href="Route4MeApiError.html">Route4MeApiError</a></li><li><a href="Route4Me.html">Route4Me</a><ul class='members'><li data-type='member'><a href="Route4Me.html#Optimizations">Optimizations</a></li><li data-type='member'><a href="Route4Me.html#Vehicles">Vehicles</a></li><li data-type='member'><a href="Route4Me.html#.version">version</a></li></ul><ul class='methods'><li data-type='method'><a href="Route4Me.html#_validate">_validate</a></li><li data-type='method'><a href="Route4Me.html#_validateArgs">_validateArgs</a></li><li data-type='method'><a href="Route4Me.html#_makeRequest">_makeRequest</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-route4me-node.html">route4me-node</a><ul class='members'><li data-type='member'><a href="module-route4me-node.html#.Route4Me">Route4Me</a></li><li data-type='member'><a href="module-route4me-node.html#.Route4MeError">Route4MeError</a></li><li data-type='member'><a href="module-route4me-node.html#.Route4MeApiError">Route4MeApiError</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="Optimizations.html">Optimizations</a><ul class='methods'><li data-type='method'><a href="Optimizations.html#create">create</a></li><li data-type='method'><a href="Optimizations.html#get">get</a></li><li data-type='method'><a href="Optimizations.html#list">list</a></li><li data-type='method'><a href="Optimizations.html#remove">remove</a></li><li data-type='method'><a href="Optimizations.html#linkAddress">linkAddress</a></li><li data-type='method'><a href="Optimizations.html#unlinkAddress">unlinkAddress</a></li></ul></li><li><a href="Routes.html">Routes</a><ul class='methods'><li data-type='method'><a href="Routes.html#get">get</a></li><li data-type='method'><a href="Routes.html#list">list</a></li><li data-type='method'><a href="Routes.html#remove">remove</a></li></ul></li><li><a href="Vehicles.html">Vehicles</a><ul class='methods'><li data-type='method'><a href="Vehicles.html#list">list</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-maintainer-guide.html">maintainer-guide</a></li></ul><h3>Interfaces</h3><ul><li><a href="ILogger.html">ILogger</a><ul class='methods'><li data-type='method'><a href="ILogger.html#debug">debug</a></li><li data-type='method'><a href="ILogger.html#info">info</a></li><li data-type='method'><a href="ILogger.html#warn">warn</a></li><li data-type='method'><a href="ILogger.html#error">error</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">resources/optimizations.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict"

const utils = require("../utils")

/**
 * @namespace
 */
class Optimizations {
	/**
	 * Optimizations facility
	 *
	 * @see {@link https://route4me.io/docs/#optimizations}
	 * @since 0.1.3
	 * @private
	 *
	 * @param  {Route4Me}      route4me [description]
	 * @return {Optimizations}          [description]
	 */
	constructor(route4me) {
		this.r = route4me
	}

	/**
	 * Create a new optimization
	 *
	 * @see {@link https://route4me.io/docs/#create-an-optimization Route4Me API}
	 * @category Optimizations
	 *
	 * @param  {jsonschema:Optimizations.CreateRequest} optimization Parameters for new optimization
	 * @param  {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.Response>}  [callback]
	 */
	create(optimization, callback) {
		return this.r._makeRequest({
			method: "POST",
			path: "/api.v4/optimization_problem.php",
			body: optimization,
			schemaName: "Optimizations.Response",
		}, callback)
	}

	/**
	 * GET a single optimization by
	 * [optimization_problem_id]{@linkcode Optimizations#get~id} parameter.
	 *
	 * @see  {@link https://route4me.io/docs/#get-an-optimization  Route4Me API}
	 * @category Optimizations
	 *
	 * @param  {string|number} id Optimization Problem ID
	 * @param  {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.Response>} [callback]
	 */
	get(id, callback) {
		return this.r._makeRequest({
			method: "GET",
			path: "/api.v4/optimization_problem.php",
			qs: {
				"optimization_problem_id": id,
			},
			schemaName: "Optimizations.Response",
		}, callback)
	}

	/**
	 * GET all optimizations belonging to an user.
	 *
	 * @see {@link https://route4me.io/docs/#get-optimizations  Route4Me API}
	 * @category Optimizations
	 *
	 * @param {(integer|string|Array.&lt;string>|Array.&lt;integer>)}  states    List of states [1..6]
	 * @param {integer}                    [limit]    Search limitation
	 * @param {integer}                    [offset]   Search starting position
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.ResponseMany>} [callback]
	 */
	list(states, limit, offset, callback) {
		const _states = utils.parseStates(states)
		if (_states instanceof Error) {
			return callback(_states)
		}

		const qs = {}
		if (_states) { qs["states"] = _states }

		utils.qsLimitAndOffset(qs, limit, offset)

		return this.r._makeRequest({
			method: "GET",
			path: "/api.v4/optimization_problem.php",
			qs,
			schemaName: "Optimizations.ResponseMany",
		}, callback)
	}

	/*
	 * Edit optimization
	 *
	 * Re-optimize existing optimizations by changing some parameters or addresses.
	 *
	 * @see {@link https://route4me.io/docs/#re-optimize-an-optimization Route4Me API}
	 * @category Optimizations
	 * @since 0.1.7
	 *
	 * @param {(integer|string)} id Optimization Problem ID `optimization_problem_id`
	 * @param {jsonschema:Optimizations.CreateRequest}   optimization - New values for `Optimization`
	 * @param {boolean} reoptimize Determine, whether the `Optimization` should be reoptimized
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.Response>} [callback]
	 */
	update(id, optimization, reoptimize, callback) {
		return this.r._makeRequest({
			method: "PUT",
			path: "/api.v4/optimization_problem.php",
			qs: {
				"optimization_problem_id": id,
				"reoptimize": reoptimize ? "1" : "0",
			},
			body: optimization,
			schemaName: "Optimizations.Response",
		}, callback)
	}

	/**
	 * Remove an existing optimization belonging to an user.
	 *
	 * @see {@link https://route4me.io/docs/#remove-an-optimization  Route4Me API}
	 * @category Optimizations
	 * @since 0.1.7
	 *
	 * @todo TODO: There is no schema for validation an output
	 *
	 * @example
	 * const response = {
	 *	"status":true,
	 *	"removed":1
	 * }
	 *
	 * @param {(integer|string)}  id       Optimization Problem ID
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.Response.Remove>}
	 *     [callback]
	 */
	remove(id, callback) {
		return this.r._makeRequest({
			method: "DELETE",
			path: "/api.v4/optimization_problem.php",
			qs: {
				"optimization_problem_id": id,
			},
			schemaName: "Optimizations.Response.Remove",
		}, callback)
	}

	/**
	 * Insert an address into an optimization, resulting in the recalculation of optimal routes.
	 *
	 * @see {@link https://route4me.io/docs/#insert-an-address-into-an-optimization Route4Me API}
	 * @category Optimizations
	 * @since 0.1.7
	 *
	 * @param {(integer|string)}  id       Optimization Problem ID
	 * @param {jsonschema:Address.Many}   addresses   Address objects
	 * @param {boolean} reoptimize Determine, whether the `Optimization` should be reoptimized
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Address.Many>}
	 */
	linkAddress(id, addresses, reoptimize, callback) {
		return this.r._makeRequest({
			method: "PUT",
			path: "/api.v4/optimization_problem.php",
			qs: {
				"optimization_problem_id": id,
				"reoptimize": reoptimize ? "1" : "0",
			},
			body: addresses,
			schemaName: "Address.Many",
		}, callback)
	}

	/**
	 * Remove a destination (an address) with specified route_destination_id
	 * from an optimization problem with specified optimization_problem_id.
	 *
	 * @see {@link https://route4me.io/docs/#remove-an-address-from-an-optimization Route4Me API}
	 * @category Optimizations
	 * @since 0.1.7
	 *
	 * @todo TODO: There is no schema for validation an output
	 *
	 * @example
	 * const response = {
	 *	"deleted":true,
	 *	"route_destination_id":1
	 * }
	 *
	 * @param {(integer|string)}  id       Optimization Problem ID
	 * @param {(integer|string)}  routeId  Route destination ID
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Optimizations.UnlinkAddressResponse>}
	 */
	unlinkAddress(id, routeId, callback) {
		return this.r._makeRequest({
			method: "DELETE",
			path: "/api.v4/address.php",
			qs: {
				"optimization_problem_id": id,
				"route_destination_id": routeId,
			},
			schemaName: "Optimizations.UnlinkAddressResponse",
		}, callback)
	}

}

module.exports = Optimizations
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Jan 29 2017 00:34:02 GMT+0500 (+05) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
