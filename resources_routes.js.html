<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>resources/routes.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Route4MeError.html">Route4MeError</a></li><li><a href="Route4MeApiError.html">Route4MeApiError</a></li><li><a href="Route4Me.html">Route4Me</a><ul class='members'><li data-type='member'><a href="Route4Me.html#Addresses">Addresses</a></li><li data-type='member'><a href="Route4Me.html#AvoidanceZones">AvoidanceZones</a></li><li data-type='member'><a href="Route4Me.html#Optimizations">Optimizations</a></li><li data-type='member'><a href="Route4Me.html#Routes">Routes</a></li><li data-type='member'><a href="Route4Me.html#Territories">Territories</a></li><li data-type='member'><a href="Route4Me.html#Vehicles">Vehicles</a></li><li data-type='member'><a href="Route4Me.html#.version">version</a></li></ul><ul class='methods'><li data-type='method'><a href="Route4Me.html#_validate">_validate</a></li><li data-type='method'><a href="Route4Me.html#_validateArgs">_validateArgs</a></li><li data-type='method'><a href="Route4Me.html#_makeRequest">_makeRequest</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-route4me-node.html">route4me-node</a><ul class='members'><li data-type='member'><a href="module-route4me-node.html#.Route4Me">Route4Me</a></li><li data-type='member'><a href="module-route4me-node.html#.Route4MeError">Route4MeError</a></li><li data-type='member'><a href="module-route4me-node.html#.Route4MeApiError">Route4MeApiError</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="Addresses.html">Addresses</a><ul class='methods'><li data-type='method'><a href="Addresses.html#updateCustomData">updateCustomData</a></li></ul></li><li><a href="AvoidanceZones.html">AvoidanceZones</a><ul class='methods'><li data-type='method'><a href="AvoidanceZones.html#create">create</a></li><li data-type='method'><a href="AvoidanceZones.html#get">get</a></li><li data-type='method'><a href="AvoidanceZones.html#list">list</a></li><li data-type='method'><a href="AvoidanceZones.html#update">update</a></li><li data-type='method'><a href="AvoidanceZones.html#remove">remove</a></li></ul></li><li><a href="Optimizations.html">Optimizations</a><ul class='methods'><li data-type='method'><a href="Optimizations.html#create">create</a></li><li data-type='method'><a href="Optimizations.html#get">get</a></li><li data-type='method'><a href="Optimizations.html#list">list</a></li><li data-type='method'><a href="Optimizations.html#remove">remove</a></li><li data-type='method'><a href="Optimizations.html#linkAddress">linkAddress</a></li><li data-type='method'><a href="Optimizations.html#unlinkAddress">unlinkAddress</a></li></ul></li><li><a href="Routes.html">Routes</a><ul class='methods'><li data-type='method'><a href="Routes.html#duplicate">duplicate</a></li><li data-type='method'><a href="Routes.html#merge">merge</a></li><li data-type='method'><a href="Routes.html#get">get</a></li><li data-type='method'><a href="Routes.html#list">list</a></li><li data-type='method'><a href="Routes.html#remove">remove</a></li></ul></li><li><a href="Territories.html">Territories</a><ul class='methods'><li data-type='method'><a href="Territories.html#create">create</a></li><li data-type='method'><a href="Territories.html#get">get</a></li><li data-type='method'><a href="Territories.html#list">list</a></li><li data-type='method'><a href="Territories.html#update">update</a></li><li data-type='method'><a href="Territories.html#remove">remove</a></li></ul></li><li><a href="Vehicles.html">Vehicles</a><ul class='methods'><li data-type='method'><a href="Vehicles.html#list">list</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-api-vs-sdk.html">api-vs-sdk</a></li><li><a href="tutorial-maintainer-guide.html">maintainer-guide</a></li></ul><h3>Interfaces</h3><ul><li><a href="ILogger.html">ILogger</a><ul class='methods'><li data-type='method'><a href="ILogger.html#debug">debug</a></li><li data-type='method'><a href="ILogger.html#info">info</a></li><li data-type='method'><a href="ILogger.html#warn">warn</a></li><li data-type='method'><a href="ILogger.html#error">error</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">resources/routes.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict"

const utils = require("../utils")

/**
 * @namespace
 */
class Routes {
	/**
	 * Routes facility
	 *
	 * @see {@link https://route4me.io/docs/#routes}
	 * @since 0.1.8
	 * @private
	 *
	 * @param  {Route4Me}      route4me - Route4Me manager
	 * @return {Routes}                 - Routes facility
	 */
	constructor(route4me) {
		this.r = route4me
	}

	/**
	 * Duplicates the route. More information - on Route4Me API-doc site (see links section).
	 *
	 * @see {@link https://route4me.io/docs/#duplicate-a-route Route4Me API}
	 * @category Routes
	 * @since 0.1.8
	 *
	 * @todo TODO: There is no output schema
	 * @example
	 * SampleOutput = {
	 * 	"optimization_problem_id":"672998C4269918AFF461E5A691BAB8D0",
	 * 	"success":true
	 * }
	 *
	 * @todo TODO: parse the response
	 *
	 * @param {string}  id       - Route ID
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Routes.DuplicateResponse>} [callback]
	 */
	duplicate(id, callback) {
		return this.r._makeRequest({
			method: "POST",
			path: "/actions/duplicate_route.php",
			qs: {
				"route_id": id,
				"to": "none",
			},
			schemaName: "Routes.DuplicateResponse",
		}, callback)
	}

	/**
	 * Merges the list of routes. More information - on Route4Me API-doc site (see links section).
	 *
	 * @see {@link https://route4me.io/docs/#merge-routes Route4Me API}
	 * @category Routes
	 * @since 0.1.8
	 *
	 * @todo TODO: There is no output schema
	 * @example
	 * SampleOutput = {
	 * 	"optimization_problem_id":"672998C4269918AFF461E5A691BAB8D0",
	 * 	"success":true
	 * }
	 *
	 * @todo TODO: parse the response
	 *
	 * @param {string|Array&lt;string>}  ids       - Array of the Route IDs to be merged.
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Routes.MergeResponse>} [callback]
	 */
	merge(ids, callback) {
		const idsPure = typeof ids === "string" ?
			ids.split(/\s*,\s*/) :
			ids

		return this.r._makeRequest({
			method: "POST",
			path: "/actions/merge_routes.php",
			body: idsPure,
			schemaName: "Routes.MergeResponse",
		}, callback)
	}

	/**
	 * Get a single route.
	 *
	 * @see {@link https://route4me.io/docs/#get-a-route Route4Me API}
	 * @category Routes
	 * @since 0.1.8
	 *
	 * @param {string}  id       - Route ID
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Routes.Route>} [callback]
	 */
	get(id, callback) {
		return this.r._makeRequest({
			method: "GET",
			path: "/api.v4/route.php",
			qs: {
				"route_id": id,
			},
			schemaName: "Routes.Route",
		}, callback)
	}

	/**
	 * Get a limited number of the routes belonging to the user.
	 *
	 * @see {@link https://route4me.io/docs/#get-multiple-routes Route4Me API}
	 * @category Routes
	 * @since 0.1.8
	 *
	 * @param {number}                    [limit]    - Search limitation
	 * @param {number}                    [offset]   - Search starting position
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Routes.Routes>} [callback]
	 */
	list(limit, offset, callback) {
		const qs = {}
		utils.qsLimitAndOffset(qs, limit, offset)

		return this.r._makeRequest({
			method: "GET",
			path: "/api.v4/route.php",
			qs,
			schemaName: "Routes.Routes",
		}, callback)
	}

	/**
	 * Given multiple route IDâ€™s, remove all routes at the same time.
	 *
	 * @see {@link https://route4me.io/docs/#remove-routes Route4Me API}
	 * @category Routes
	 * @since 0.1.8
	 *
	 * @todo TODO: There is no schema for the response
	 * @example
	 * SampleResponse = {
	 * {
	 * 	"deleted": true,
	 * 	"route_id": "270CB108F227AD6E11827FC08EE4E2D7,C340E3F6AF28E20EFAE0FBE51759C338",
	 * 	"route_ids": [
	 * 		"270CB108F227AD6E11827FC08EE4E2D7",
	 * 		"C340E3F6AF28E20EFAE0FBE51759C338"
	 * 	]
	 * }
	 *
	 * @todo TODO: parse the response
	 *
	 * @param {(number|string|Array&lt;number>|Array&lt;string>)}  ids - Route ID **or** comma-separated
	 *        list of route IDs **or** array of route IDs
	 * @param {Object}         [options] - Options for SDK method
	 * @param {boolean|number} [options.queryLimit=false] - `false` means, that query will be sent
	 *        "as is". `number` value cause to split the original request to several chunks,
	 *        limited in size by this parameter, chunks will be sent sequentionally.
	 * @param {module:route4me-node~RequestCallback&lt;jsonschema:Routes.RemoveResponse>}
	 *     [callback]
	 */
	remove(ids, options, callback) {
		const idsPure = typeof ids === "string" ?
			ids.replace(/\s+/g, "") :
			ids

		let cb = callback
		if (typeof cb === "undefined"
			&amp;&amp; typeof options === "function"
		) {
			cb = options
		}

		if (options &amp;&amp; options.queryLimit) {
			// TODO: split ids for max allowed request parameter lengh
			// and perform several queries
			this.r._logger.error("Route.remove with options.queryLimit is not implemented")
		}

		return this.r._makeRequest({
			method: "DELETE",
			path: "/api.v4/route.php",
			qs: {
				"route_id": idsPure,
			},
			schemaName: "Routes.RemoveResponse",
		}, cb)
	}
}

module.exports = Routes
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Jan 29 2017 16:40:14 GMT+0500 (+05) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
